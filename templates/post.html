{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}
<div class="question-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–æ–ø—Ä–æ—Å–∞ -->
    <h1 class="question-title">{{ question.title }}</h1>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–ø—Ä–æ—Å–µ -->
    <div class="question-content">
        <!-- –ê–≤–∞—Ç–∞—Ä –∞–≤—Ç–æ—Ä–∞ –≤–æ–ø—Ä–æ—Å–∞ -->
        <div class="question-author">
            <img src="{% if question.author.profile.avatar %}{{ question.author.profile.avatar.url }}{% else %}{% static 'img/profile.png' %}{% endif %}"
                 alt="Avatar"
                 class="avatar">
            <span class="author-name">{{ question.author.username }}</span>
        </div>

        <!-- –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ -->
        <div class="question-text">
            {{ question.text }}
        </div>

        <!-- –õ–∞–π–∫–∏ –∏ —Ç–µ–≥–∏ -->
        <div class="question-meta">
            <div class="likes">
                <span class="icon">üëç</span>
                <span class="count">{{ question.likes_count }}</span>
            </div>

            <div class="tags">
                {% for tag in question.tags.all %}
                    <a href="{% url 'tag_questions' tag.name %}" class="tag">{{ tag.name }}</a>
                {% empty %}
                    <span class="tag">No tags</span>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- –û—Ç–≤–µ—Ç—ã -->
    <div class="answers-container">
        <h2 class="answers-title">Answers ({{ question.answers_count }})</h2>

        {% for answer in answers %}
            <div class="answer">
                <!-- –ê–≤–∞—Ç–∞—Ä –∞–≤—Ç–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞ -->
                <div class="answer-author">
                    <img src="{% if answer.author.profile.avatar %}{{ answer.author.profile.avatar.url }}{% else %}{% static 'img/profile.png' %}{% endif %}"
                         alt="Avatar"
                         class="avatar">
                    <span class="author-name">{{ answer.author.username }}</span>
                </div>

                <!-- –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ -->
                <div class="answer-text">
                    {{ answer.text }}
                </div>

                <!-- –õ–∞–π–∫–∏ –æ—Ç–≤–µ—Ç–∞ -->
                <div class="answer-likes">
                    <span class="icon">üëç</span>
                    <span class="count">{{ answer.likes_count }}</span>
                </div>
            </div>
        {% empty %}
            <p class="no-answers">No answers yet. Be the first to answer!</p>
        {% endfor %}
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ -->
    <div class="add-answer">
        <h2>Add an Answer</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="submit-button">Submit</button>
        </form>
    </div>
</div>
{% endblock %}